// Booking form logic
const bookingForm = document.getElementById('bookingForm');
if (bookingForm) {
  bookingForm.addEventListener('submit', function (e) {
    e.preventDefault();
    const data = new FormData(bookingForm);
    const entry = Object.fromEntries(data);

    // Debug: log the form data
    console.log('New Booking:', entry);

    // Get existing bookings or initialize an empty array
    let bookings = JSON.parse(localStorage.getItem('bookings')) || [];
    bookings.push(entry);

    // Save updated bookings to localStorage
    localStorage.setItem('bookings', JSON.stringify(bookings));

    alert('Booking saved!');

    // Reset the form
    bookingForm.reset();

    // Re-render bookings list after new booking
    renderBookings();
  });
}

// Render Bookings
document.addEventListener("DOMContentLoaded", function () {
  renderBookings();
});

function renderBookings() {
  const bookingsList = document.getElementById('bookings-list');
  bookingsList.innerHTML = ''; // Clear any existing bookings

  const bookings = JSON.parse(localStorage.getItem('bookings')) || [];

  // Debug: log stored bookings
  console.log('Stored Bookings:', bookings);

  // Render each booking
  bookings.forEach(booking => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${booking.clientName}</td>
      <td>${booking.bookingDate}</td>
      <td>${booking.bookingTime}</td>
      <td>${booking.details}</td>
    `;
    bookingsList.appendChild(tr);
  });
}

// Client form logic
const clientForm = document.getElementById('clientForm');
if (clientForm) {
  clientForm.addEventListener('submit', function (e) {
    e.preventDefault();
    const data = new FormData(clientForm);
    const entry = Object.fromEntries(data);

    // Debug: log the new client
    console.log('New Client:', entry);

    let clients = JSON.parse(localStorage.getItem('clients')) || [];
    clients.push(entry);
    localStorage.setItem('clients', JSON.stringify(clients));

    alert('Client saved!');
    clientForm.reset();

    renderClients();
  });
}

// Render Clients
document.addEventListener("DOMContentLoaded", function () {
  renderClients();
});

function renderClients() {
  const clientsList = document.getElementById('clients-list');
  clientsList.innerHTML = ''; // Clear any existing clients

  const clients = JSON.parse(localStorage.getItem('clients')) || [];

  // Debug: log stored clients
  console.log('Stored Clients:', clients);

  clients.forEach(client => {
    const li = document.createElement('li');
    li.textContent = `${client.clientName} - ${client.clientPhone} - ${client.clientEmail}`;
    clientsList.appendChild(li);
  });
}

// Income form logic
const incomeForm = document.getElementById('incomeForm');
if (incomeForm) {
  incomeForm.addEventListener('submit', function (e) {
    e.preventDefault();
    const data = new FormData(incomeForm);
    const entry = Object.fromEntries(data);

    // Debug: log the new income entry
    console.log('New Income:', entry);

    let income = JSON.parse(localStorage.getItem('income')) || [];
    income.push(entry);
    localStorage.setItem('income', JSON.stringify(income));

    alert('Income saved!');
    incomeForm.reset();

    renderIncome();
  });
}

// Render Income
document.addEventListener("DOMContentLoaded", function () {
  renderIncome();
});

function renderIncome() {
  const incomeList = document.getElementById('income-list');
  incomeList.innerHTML = ''; // Clear any existing income entries

  const income = JSON.parse(localStorage.getItem('income')) || [];

  // Debug: log stored income
  console.log('Stored Income:', income);

  income.forEach(entry => {
    const li = document.createElement('li');
    li.textContent = `${entry.amount} on ${entry.date} - ${entry.source}`;
    incomeList.appendChild(li);
  });
}
